<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Connect to Aer</title>
  <style>
    html, body { margin: 0; padding: 0; font-family: -apple-system, system-ui, Helvetica, Arial; }
    .wrap { padding: 14px 16px; }
    input { width: 100%; padding: 8px; border-radius: 8px; border: 1px solid #d0d0d0; }
    .row { display: flex; gap: 8px; margin-top: 10px; }
    button { appearance: none; border: 1px solid #8BA888; background: #8BA888; color: #fff; padding: 8px 10px; border-radius: 8px; cursor: pointer; }
    a { text-decoration: none; color: #8BA888; line-height: 32px; }
  </style>
</head>
<body>
  <div class="wrap">
    <h3 style="display:flex;align-items:center;gap:8px"><img src="https://aercarbon.com/favicon.ico" alt="Aer" width="20" height="20" /> Connect to Aer</h3>
    <input id="token" placeholder="Aer Token (aer_{userId})" />
    <div class="row">
      <a href="#" id="help">Whatâ€™s this token?</a>
      <div style="flex:1"></div>
      <button id="connect">Connect</button>
    </div>
  </div>
  <script>
    const tokenEl = document.getElementById('token');
    document.getElementById('help').onclick = (e) => { e.preventDefault(); window.aer.openHelp(); };
    document.getElementById('connect').onclick = async () => {
      const v = tokenEl.value.trim();
      if (!v || !v.startsWith('aer_')) { alert('Invalid token format.'); return; }
      await window.aer.saveToken(v);
      window.close();
    };
  </script>
</body>
</html>
